<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Xeno Help & Tutorial</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Custom styles for a pure black (AMOLED) aesthetic */
        body {
            background-color: #000000;
            background-image: radial-gradient(circle at 50% 0%, #111111 0%, #000000 60%);
            background-attachment: fixed;
            color: #f3f4f6;
            line-height: 1.6;
            font-family: ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif;
        }

        .accent-color { color: #ffffff; }

        .fix-card {
            background-color: rgba(13, 13, 13, 0.85);
            backdrop-filter: blur(8px);
            -webkit-backdrop-filter: blur(8px);
            border: 1px solid #1a1a1a;
            transition: transform 0.2s ease, border-color 0.2s ease, box-shadow 0.2s ease;
        }

        .fix-card:hover {
            border-color: #4b5563;
            transform: translateY(-4px);
            box-shadow: 0 10px 20px -5px rgba(0, 0, 0, 0.8);
        }

        .fix-card.completed {
            border-color: #10b981;
            box-shadow: 0 0 15px rgba(16, 185, 129, 0.2);
        }

        .warning-box {
            background-color: rgba(31, 11, 11, 0.9); 
            border: 1px solid #ef4444; 
            color: #fca5a5; 
        }

        .action-button {
            padding: 8px 16px;
            border-radius: 9999px;
            font-weight: 600;
            font-size: 0.875rem;
            transition: background-color 0.2s;
        }
        
        /* NEW: Default styling for the mark button */
        .mark-button {
            background-color: #3b82f6; /* blue-500 */
            color: white;
        }
        .mark-button:hover {
            background-color: #2563eb; /* blue-600 */
        }

        @keyframes green-pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
        .green-pulse {
            animation: green-pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
        }

        /* CHAT BOT STYLES */
        .chat-container {
            transition: opacity 0.3s ease, transform 0.3s ease;
        }
        .chat-hidden {
            opacity: 0;
            transform: translateY(20px);
            pointer-events: none;
        }
        .chat-visible {
            opacity: 1;
            transform: translateY(0);
            pointer-events: all;
        }
        .typing-dot {
            animation: typing 1.4s infinite ease-in-out both;
        }
        .typing-dot:nth-child(1) { animation-delay: -0.32s; }
        .typing-dot:nth-child(2) { animation-delay: -0.16s; }
        @keyframes typing {
            0%, 80%, 100% { transform: scale(0); }
            40% { transform: scale(1); }
        }
        /* Scrollbar for chat */
        .chat-scroll::-webkit-scrollbar { width: 6px; }
        .chat-scroll::-webkit-scrollbar-track { background: #111; }
        .chat-scroll::-webkit-scrollbar-thumb { background: #333; border-radius: 3px; }
        .chat-scroll::-webkit-scrollbar-thumb:hover { background: #555; }
    </style>
</head>
<body class="p-4 md:p-10 min-h-screen">

    <div class="max-w-7xl mx-auto">
        
        <div class="flex flex-col md:flex-row justify-end space-y-3 md:space-y-0 md:space-x-4 mb-8">
            <a href="https://discord.gg/xe-no" target="_blank" rel="noopener noreferrer" class="action-button bg-indigo-600 hover:bg-indigo-700 text-white flex items-center justify-center md:justify-start">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 127.14 96.36" fill="currentColor" class="mr-2">
                    <path d="M107.7,8.07A105.15,105.15,0,0,0,81.47,0a72.06,72.06,0,0,0-3.36,6.83A97.68,97.68,0,0,0,49,6.83,72.37,72.37,0,0,0,45.64,0,105.89,105.89,0,0,0,19.39,8.09C2.79,32.65-1.71,56.6.54,80.21h0A105.73,105.73,0,0,0,32.71,96.36,77.11,77.11,0,0,0,39.6,85.25a68.42,68.42,0,0,1-10.85-5.18c.91-.66,1.8-1.34,2.66-2a75.57,75.57,0,0,0,64.32,0c.87.71,1.76,1.39,2.66,2a68.68,68.68,0,0,1-10.87,5.19,77,77,0,0,0,6.89,11.1A105.25,105.25,0,0,0,126.6,80.22c1.24-23.28-3.28-47.54-18.9-72.15ZM42.45,65.69C36.18,65.69,31,60,31,53s5-12.74,11.43-12.74S54,46,53.89,53,48.84,65.69,42.45,65.69Zm42.24,0C78.41,65.69,73.25,60,73.25,53s5.18-12.74,11.54-12.74S96.23,46,96.12,53,91.08,65.69,84.69,65.69Z"/>
                </svg>
                Discord
            </a>
            <a href="https://xeno.onl" target="_blank" rel="noopener noreferrer" class="action-button bg-blue-600 hover:bg-blue-700 text-white flex items-center justify-center md:justify-start">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="mr-2"><circle cx="12" cy="12" r="10"/><line x1="2" y1="12" x2="22" y2="12"/><path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"/></svg>
                Website
            </a>
        </div>
        
        <header class="text-center mb-10 py-12">
            <h1 class="text-5xl md:text-7xl font-bold mb-4 tracking-tight text-white">
                Help & Tutorial
            </h1>
            <p class="text-gray-400 text-lg font-light">
                Learn how to use Xeno and troubleshoot common issues
            </p>
        </header>

        <div class="mb-16 max-w-5xl mx-auto">
            <div class="flex items-center justify-center mb-6">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#f3f4f6" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-6 h-6 mr-3"><polygon points="5 3 19 12 5 21 5 3"/></svg>
                <h2 class="text-2xl font-semibold text-white">Quick Start Guide</h2>
            </div>

            <div class="fix-card p-6 md:p-10 rounded-xl relative overflow-hidden">
                <div class="absolute top-0 right-0 w-64 h-64 bg-indigo-900 rounded-full blur-3xl opacity-20 -mr-16 -mt-16 pointer-events-none"></div>

                <div class="grid grid-cols-1 md:grid-cols-3 gap-8 relative z-10">
                    
                    <div class="text-center relative group">
                        <div class="w-14 h-14 bg-gray-900 rounded-full flex items-center justify-center mx-auto mb-4 border border-gray-700 text-white font-bold text-xl group-hover:border-indigo-500 transition-colors">1</div>
                        <h3 class="text-xl font-bold text-white mb-2">Open & Launch</h3>
                        <p class="text-gray-400 text-sm leading-relaxed">
                            Open <span class="text-white font-semibold">Roblox</span> and join a game first. Then, open the <span class="text-white font-semibold">Xeno</span> application.
                        </p>
                    </div>

                    <div class="text-center relative group">
                        <div class="hidden md:block absolute top-7 -left-1/2 w-full h-0.5 bg-gradient-to-r from-transparent via-gray-700 to-transparent -z-10"></div>
                        
                        <div class="w-14 h-14 bg-indigo-600 rounded-full flex items-center justify-center mx-auto mb-4 shadow-lg shadow-indigo-500/30 text-white group-hover:scale-110 transition-transform duration-300">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"/><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"/></svg>
                        </div>
                        <h3 class="text-xl font-bold text-white mb-2">Click the Chain</h3>
                        <p class="text-gray-400 text-sm leading-relaxed">
                            Press the <span class="text-indigo-400 font-bold">Chain Button</span> icon inside Xeno to inject into the game process.
                        </p>
                    </div>

                    <div class="text-center relative group">
                        <div class="hidden md:block absolute top-7 -left-1/2 w-full h-0.5 bg-gradient-to-r from-transparent via-gray-700 to-transparent -z-10"></div>

                        <div class="w-14 h-14 bg-gray-900 rounded-full flex items-center justify-center mx-auto mb-4 border border-green-500 text-green-400 shadow-[0_0_15px_rgba(34,197,94,0.3)]">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"/></svg>
                        </div>
                        <h3 class="text-xl font-bold text-white mb-2">Check for Green</h3>
                        <p class="text-gray-400 text-sm leading-relaxed">
                            Ensure the <span class="text-white font-semibold">Clients Tab</span> turns <span class="text-green-400 font-bold green-pulse">GREEN</span>. You are now ready to execute scripts!
                        </p>
                    </div>

                </div>
            </div>
        </div>

        <div class="flex items-center justify-center mb-10">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#f3f4f6" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-6 h-6 mr-3"><path d="M9.09 3a9 9 0 0 1 5.86 1.13c1.78.68 3.1 2.2 3.55 4.02.45 1.82 0 3.82-1.3 5.12l-5.6 5.6c-1.3 1.3-3.05 1.84-4.87 1.39-1.82-.45-3.34-1.77-4.02-3.55A9 9 0 0 1 3 14.91"/></svg>
            <h2 class="text-2xl font-semibold text-white">Common Issues</h2>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 mb-16" id="fixes-grid">

            <div id="fix-1" class="fix-card p-6 rounded-lg flex flex-col justify-between">
                <div>
                    <div class="flex items-start mb-4">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#f3f4f6" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-5 h-5 mt-1 mr-3 text-white"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>
                        <div>
                            <h2 class="text-xl font-bold accent-color mb-1">Xeno not opening</h2> 
                            <p class="text-sm text-gray-400">You do not have the required dependencies downloaded.</p>
                        </div>
                    </div>
                    
                    <p class="text-gray-300 mb-4">Download Microsoft Webview2 and .NET Runtime 8.0.0</p>
                    <ul class="space-y-3 text-gray-400 list-disc list-inside pl-3">
                        <li class="flex flex-wrap items-center group">
                            <a href="https://go.microsoft.com/fwlink/?linkid=2124701" target="_blank" rel="noopener noreferrer" class="font-medium text-blue-400 hover:text-blue-300 ml-2">Microsoft Webview2</a>
                        </li>
                        <li class="flex flex-wrap items-center group">
                            <a href="https://dotnet.microsoft.com/en-us/download/dotnet/thank-you/runtime-desktop-8.0.10-windows-x64-installer" target="_blank" rel="noopener noreferrer" class="font-medium text-blue-400 hover:text-blue-300 ml-2">.NET Runtime 8.0.0</a>
                        </li>
                    </ul>
                </div>
                
                <div class="mt-6 pt-4 border-t border-gray-800 flex justify-end items-center" id="tracker-fix-1">
                    <button onclick="toggleFixStatus('fix-1')" class="px-5 py-2 text-sm rounded-full transition duration-200 font-semibold mark-button">
                        Mark as Fixed
                    </button>
                </div>
            </div>

            <div id="fix-2" class="fix-card p-6 rounded-lg flex flex-col justify-between">
                <div>
                    <div class="flex items-center mb-4">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#f59e0b" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-6 h-6 mr-3"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/><path d="M15 9l-4 4-2-2"/></svg>
                        <h2 class="text-xl font-bold accent-color">"Failed to Attach" Error</h2>
                    </div>
                    <p class="text-gray-400 mb-4">Security software interference or missing C++ dependencies.</p>
                    
                    <ul class="list-disc list-inside space-y-3 pl-3 text-gray-300">
                        <li class="flex flex-wrap items-center group">
                            <span>Install <b><a href="https://aka.ms/vs/17/release/vc_redist.x64.exe" target="_blank" rel="noopener noreferrer" class="text-blue-400 hover:text-blue-300 underline">Visual C++ Redist. (x64)</a></b></span>
                        </li>
                        <li class="text-gray-400 font-bold">
                            Add the Xeno folder to your antivirus exclusions.
                        </li>
                        <li>
                            Ensure both Xeno and Roblox are fully closed before running Xeno.
                        </li>
                    </ul>
                </div>
                
                <div class="mt-6 pt-4 border-t border-gray-800 flex justify-end items-center" id="tracker-fix-2">
                    <button onclick="toggleFixStatus('fix-2')" class="px-5 py-2 text-sm rounded-full transition duration-200 font-semibold mark-button">
                        Mark as Fixed
                    </button>
                </div>
            </div>

            <div id="fix-3" class="fix-card p-6 rounded-lg flex flex-col justify-between">
                <div>
                    <div class="flex items-center mb-4">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#ef4444" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-6 h-6 mr-3"><circle cx="12" cy="12" r="10"/><line x1="12" y1="8" x2="12" y2="12"/><line x1="12" y1="16" x2="12.01" y2="16"/></svg>
                        <h2 class="text-xl font-bold accent-color">Version Mismatch / Crash</h2>
                    </div>
                    <p class="text-gray-400 mb-4">Roblox recently updated. Xeno requires specific client versions.</p>
                    
                    <ul class="list-disc list-inside space-y-3 pl-3 text-gray-300">
                        <li class="flex flex-wrap items-center group">
                            <span class="mr-2">Download: <b><a href="https://rdd.weao.gg" target="_blank" rel="noopener noreferrer" class="text-blue-400 hover:text-blue-300 underline">Roblox Downgrader</a></b></span>
                        </li>
                        <li>
                            Run the utility to install the <b>last compatible version</b>.
                        </li>
                        <li class="font-semibold">
                            Launch the downgraded Robloxplayerbeta.exe via the folder you installed.
                        </li>
                    </ul>
                </div>
                
                <div class="mt-6 pt-4 border-t border-gray-800 flex justify-end items-center" id="tracker-fix-3">
                    <button onclick="toggleFixStatus('fix-3')" class="px-5 py-2 text-sm rounded-full transition duration-200 font-semibold mark-button">
                        Mark as Fixed
                    </button>
                </div>
            </div>
            
            <div id="fix-4" class="fix-card p-6 rounded-lg flex flex-col justify-between">
                <div>
                    <div class="flex items-center mb-4">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#8b5cf6" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-6 h-6 mr-3"><polyline points="3 6 5 6 21 6"/><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"/><line x1="10" y1="11" x2="10" y2="17"/><line x1="14" y1="11" x2="14" y2="17"/></svg>
                        <h2 class="text-xl font-bold accent-color">Corrupted Cache Error</h2>
                    </div>
                    <p class="text-gray-400 mb-4">"Error Parsing Clients JSON" or corrupted installation.</p>
                    
                    <ul class="list-disc list-inside space-y-3 pl-3 text-gray-300 text-sm">
                        <li>
                            Press <b>Win + R</b> on your keyboard.
                        </li>
                        <li class="group flex flex-wrap items-center">
                            <span>Type <code class="bg-gray-800 px-1 py-0.5 rounded text-indigo-300">%localappdata%/xeno</code></span>
                            <button onclick="copyToClipboard('%localappdata%/xeno', this)" class="ml-2 inline-flex items-center p-1 rounded hover:bg-white/10 text-gray-500 hover:text-white" title="Copy Path"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg></button>
                        </li>
                        <li class="font-bold text-red-400">
                            Delete the entire "Xeno" folder.
                        </li>
                        <li>
                            Reinstall Xeno from scratch.
                        </li>
                    </ul>
                </div>
                
                <div class="mt-6 pt-4 border-t border-gray-800 flex justify-end items-center" id="tracker-fix-4">
                    <button onclick="toggleFixStatus('fix-4')" class="px-5 py-2 text-sm rounded-full transition duration-200 font-semibold mark-button">
                        Mark as Fixed
                    </button>
                </div>
            </div>

            <div id="fix-5" class="fix-card p-6 rounded-lg flex flex-col justify-between">
                <div>
                    <div class="flex items-center mb-4">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#10b981" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-6 h-6 mr-3"><circle cx="12" cy="12" r="10"/><line x1="2" y1="12" x2="22" y2="12"/><path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"/></svg>
                        <h2 class="text-xl font-bold accent-color">Official Site Blocked</h2>
                    </div>
                    <p class="text-gray-400 mb-4">If you cannot reach the main download source due to ISP blocks.</p>
                    
                    <ul class="list-disc list-inside space-y-3 pl-3 text-gray-300">
                        <li class="flex flex-wrap items-center group">
                            <span class="mr-2"><b>Mirror:</b> <a href="https://x3no.pages.dev" target="_blank" rel="noopener noreferrer" class="text-blue-400 hover:text-blue-300 underline">x3no.pages.dev</a></span>
                        </li>
                        <li class="flex flex-wrap items-center group">
                            <span class="mr-2"><b>Web Proxy:</b> <a href="https://www.proxyium.com/" target="_blank" rel="noopener noreferrer" class="text-blue-400 hover:text-blue-300 underline">Proxyium</a></span>
                        </li>
                    </ul>
                </div>
                
                <div class="mt-6 pt-4 border-t border-gray-800 flex justify-end items-center" id="tracker-fix-5">
                    <button onclick="toggleFixStatus('fix-5')" class="px-5 py-2 text-sm rounded-full transition duration-200 font-semibold mark-button">
                        Mark as Fixed
                    </button>
                </div>
            </div>
            
            <div id="fix-6" class="fix-card p-6 rounded-lg flex flex-col justify-between">
                <div>
                    <div class="flex items-center mb-4">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#f43f5e" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-6 h-6 mr-3"><polyline points="16 18 22 12 16 6"/><polyline points="8 6 2 12 8 18"/><line x1="14" y1="4" x2="10" y2="20"/></svg>
                        <h2 class="text-xl font-bold accent-color">Need Scripts?</h2>
                    </div>
                    <p class="text-gray-400 mb-4">Finding reliable and current scripts for your game session.</p>
                    
                    <ul class="list-disc list-inside space-y-3 pl-3 text-gray-300">
                        <li class="flex flex-wrap items-center group">
                            <span class="mr-2">Visit <b><a href="https://scriptblox.com" target="_blank" rel="noopener noreferrer" class="text-blue-400 hover:text-blue-300 underline">ScriptBlox</a></b> for scripts.</span>
                        </li>
                    </ul>
                </div>
                
                <div class="mt-6 pt-4 border-t border-gray-800 flex justify-end items-center" id="tracker-fix-6">
                    <button onclick="toggleFixStatus('fix-6')" class="px-5 py-2 text-sm rounded-full transition duration-200 font-semibold mark-button">
                        Mark as Fixed
                    </button>
                </div>
            </div>

            <div id="fix-7" class="fix-card p-6 rounded-lg flex flex-col justify-between">
                <div>
                    <div class="flex items-center mb-4">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#0ea5e9" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-6 h-6 mr-3"><rect x="3" y="3" width="18" height="18" rx="2" ry="2"/><line x1="3" y1="9" x2="21" y2="9"/><line x1="9" y1="21" x2="9" y2="9"/></svg>
                        <h2 class="text-xl font-bold accent-color">Tabs saying "null"</h2>
                    </div>
                    <p class="text-gray-400 mb-4">Your tab configuration files have become corrupt.</p>
                    
                    <ul class="list-disc list-inside space-y-3 pl-3 text-gray-300 text-sm">
                        <li>
                            Press <b>Win + R</b> to open Run.
                        </li>
                        <li class="group flex flex-wrap items-center">
                            <span>Type: <code class="bg-gray-800 px-1 py-0.5 rounded text-indigo-300">%localappdata%/xeno/tabs</code></span>
                            <button onclick="copyToClipboard('%localappdata%/xeno/tabs', this)" class="ml-2 inline-flex items-center p-1 rounded hover:bg-white/10 text-gray-500 hover:text-white" title="Copy Path"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg></button>
                        </li>
                        <li class="font-bold text-red-400">
                            Delete everything inside this folder.
                        </li>
                        <li>
                            Restart Xeno.
                        </li>
                    </ul>
                </div>
                
                <div class="mt-6 pt-4 border-t border-gray-800 flex justify-end items-center" id="tracker-fix-7">
                    <button onclick="toggleFixStatus('fix-7')" class="px-5 py-2 text-sm rounded-full transition duration-200 font-semibold mark-button">
                        Mark as Fixed
                    </button>
                </div>
            </div>

        </div>

        <div class="warning-box p-6 rounded-lg shadow-lg mt-8">
            <h2 class="text-2xl font-bold mb-3 flex items-center">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-6 h-6 mr-3"><path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"/><line x1="12" y1="9" x2="12" y2="13"/><line x1="12" y1="17" x2="12.01" y2="17"/></svg>
                General Info: Antivirus Warnings
            </h2>
            <ul class="list-disc space-y-2 pl-6 text-gray-300">
                <li>
                    Exploits are frequently <b>falsely marked as viruses/malware</b> by antivirus software due to their nature (Obfuscation, game manipulation).
                </li>
                <li>
                    You must <b>temporarily disable your anti-virus/firewall</b> to download and run the file.
                </li>
            </ul>
        </div>
        <footer class="text-center mt-16 pt-6 border-t border-gray-800 text-gray-500 text-sm">
            <p class="mb-2">Guide powered by Xeno community knowledge.</p>
            <p>
                Need more help? Join our Discord: 
                <a href="https://discord.gg/xe-no" target="_blank" rel="noopener noreferrer" class="text-blue-400 hover:text-blue-300 font-semibold underline">.gg/xe-no</a>
            </p>
        </footer>

    </div>

    <div id="ai-widget" class="fixed bottom-4 right-4 z-50 flex flex-col items-end">
        
        <div id="chat-window" class="chat-hidden mb-4 w-80 md:w-96 bg-gray-900 border border-gray-700 rounded-xl shadow-2xl flex flex-col overflow-hidden transition-all duration-300" style="height: 500px; max-height: 80vh;">
            
            <div class="bg-gray-800 p-4 border-b border-gray-700 flex justify-between items-center">
                <div class="flex items-center">
                    <div class="w-2 h-2 rounded-full bg-green-500 mr-2 animate-pulse"></div>
                    <h3 class="font-bold text-white">Xeno AI Support</h3>
                </div>
            </div>

            <div class="relative flex-1 bg-black/50 flex flex-col h-full overflow-hidden">
                
                <div id="chat-messages" class="flex-1 overflow-y-auto p-4 space-y-3 chat-scroll">
                    <div class="flex justify-start">
                        <div class="bg-gray-800 text-gray-200 rounded-lg rounded-tl-none p-3 text-sm max-w-[85%] border border-gray-700">
                            Hello! I can help you fix common Xeno issues. Ask me anything!
                        </div>
                    </div>
                </div>

                <div class="p-3 bg-gray-800 border-t border-gray-700">
                    <div class="flex items-center bg-gray-900 rounded-lg border border-gray-600 px-3 py-2">
                        <input type="text" id="chat-input" placeholder="Type a message..." class="bg-transparent border-none text-white text-sm w-full focus:outline-none" onkeypress="handleEnter(event)">
                        <button onclick="sendMessage()" class="ml-2 text-indigo-400 hover:text-white transition-colors">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="22" y1="2" x2="11" y2="13"/><polygon points="22 2 15 22 11 13 2 9 22 2"/></svg>
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <button onclick="toggleChat()" class="bg-indigo-600 hover:bg-indigo-700 text-white p-4 rounded-full shadow-lg transition-transform hover:scale-105 flex items-center justify-center">
            <svg id="icon-open" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/></svg>
            <svg id="icon-close" class="hidden" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg>
        </button>
    </div>

    <script>
// --- LOCAL STORAGE DATA HANDLING (Fix Tracker) ---
const FIX_KEYS = ['fix-1', 'fix-2', 'fix-3', 'fix-4', 'fix-5', 'fix-6', 'fix-7'];

const loadFixStatuses = () => {
    const statuses = {};
    FIX_KEYS.forEach(key => {
        statuses[key] = localStorage.getItem(key) === 'true';
    });
    return statuses;
};

window.toggleFixStatus = (fixId) => {
    const currentStatus = localStorage.getItem(fixId) === 'true';
    const newStatus = !currentStatus;
    localStorage.setItem(fixId, newStatus);
    updateUI(fixId, newStatus);
};

const updateUI = (fixId, isCompleted) => {
    const card = document.getElementById(fixId);
    const trackerContainer = document.getElementById(`tracker-${fixId}`);
    
    if (!card || !trackerContainer) return;

    const markButton = trackerContainer.querySelector('.mark-button');

    if (isCompleted) {
        card.classList.add('completed');
        markButton.textContent = 'Status: FIXED! (Click to Reset)';
        markButton.classList.remove('bg-blue-600', 'hover:bg-blue-700');
        markButton.classList.add('bg-green-600', 'hover:bg-green-700', 'text-white');
    } else {
        card.classList.remove('completed');
        markButton.textContent = 'Mark as Fixed';
        markButton.classList.remove('bg-green-600', 'hover:bg-green-700');
        // Re-add the original classes defined in CSS for the default state
        markButton.classList.add('bg-blue-600', 'hover:bg-blue-700', 'text-white');
    }
};

const initializeUI = () => {
    FIX_KEYS.forEach(fixId => {
        updateUI(fixId, localStorage.getItem(fixId) === 'true');
    });
};

window.copyToClipboard = (text, btnElement) => {
    navigator.clipboard.writeText(text).then(() => {
        const originalContent = btnElement.innerHTML;
        btnElement.innerHTML = `<svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="#10b981" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"/></svg>`;
        setTimeout(() => {
            btnElement.innerHTML = originalContent;
        }, 2000);
    }).catch(err => {
        console.error('Failed to copy text: ', err);
    });
};

// --- RAG CONTEXT FUNCTION ---
function getFixesContext() {
    const fixCards = document.querySelectorAll('.fix-card');
    let contextString = "AVAILABLE FIXES ON THIS PAGE:\n---\n";

    fixCards.forEach((card, index) => {
        const title = card.querySelector('h2').textContent.trim();
        // Extract content from all list items and paragraphs in the card
        const contentElements = card.querySelectorAll('p, li');
        let details = Array.from(contentElements).map(el => el.textContent.trim()).join(' | ');

        // Clean up the details string to remove extra spaces/newlines
        details = details.replace(/\s\s+/g, ' ').replace(/(\s\|\s)+/g, ' | ').trim();
        
        contextString += `Fix ${index + 1}: ${title}\nDetails: ${details}\n\n`;
    });
    
    contextString += "---\n";
    return contextString;
}

// --- NEW: ROBUST MARKDOWN TO HTML CONVERSION FUNCTION ---
function markdownToHtml(markdown) {
    let html = markdown;

    // Escape HTML tags (prevent XSS and conflict with existing structure)
    html = html.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;');

    // Convert bold: **text** or __text__ -> <strong>text</strong>
    html = html.replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>');
    html = html.replace(/__(.*?)__/g, '<strong>$1</strong>');

    // Convert italic: *text* or _text_ -> <em>text</em>
    html = html.replace(/\*(.*?)\*/g, '<em>$1</em>');
    html = html.replace(/_(.*?)_/g, '<em>$1</em>');

    // Convert links: [text](url) -> <a href="url" target="_blank" class="text-blue-400 hover:underline">text</a>
    html = html.replace(/\[([^\]]+)\]\(([^)]+)\)/g, '<a href="$2" target="_blank" class="text-indigo-400 hover:underline">$1</a>');

    // Convert code blocks: `code` -> <code class="bg-gray-700 px-1 py-0.5 rounded text-white text-xs">code</code>
    html = html.replace(/`([^`]+)`/g, '<code class="bg-gray-700 px-1 py-0.5 rounded text-white text-xs">$1</code>');

    // Convert ordered lists
    html = html.replace(/(\d+\.\s.*(\n\s*\d+\.\s.*)*)/g, (match) => {
        const items = match.split('\n').filter(line => line.trim().length > 0).map(line => `<li>${line.trim().replace(/^\d+\.\s/, '')}</li>`).join('');
        return `<ol class="list-decimal list-inside ml-4 mt-2 mb-2 space-y-1">${items}</ol>`;
    });
    
    // Convert unordered lists
    html = html.replace(/(\*\s.*(\n\s*\*\s.*)*)/g, (match) => {
        const items = match.split('\n').filter(line => line.trim().length > 0).map(line => `<li>${line.trim().replace(/^\*\s/, '')}</li>`).join('');
        return `<ul class="list-disc list-inside ml-4 mt-2 mb-2 space-y-1">${items}</ul>`;
    });


    // Convert double newlines to paragraphs
    html = html.replace(/\n\n/g, '</p><p>');

    // Convert single newlines to <br> inside paragraphs (or just replace with space)
    html = html.replace(/\n/g, ' ');

    // Wrap the entire content in a paragraph if it doesn't start with a block element
    if (!html.startsWith('<p>') && !html.startsWith('<ul') && !html.startsWith('<ol') && !html.startsWith('<strong>')) {
        html = `<p>${html}</p>`;
    }

    // Remove empty paragraphs/tags
    html = html.replace(/<p>\s*<\/p>/g, '').replace(/<ol>\s*<\/ol>/g, '').replace(/<ul>\s*<\/ul>/g, '');

    return html;
}

// --- CHAT WIDGET LOGIC ---
const chatWindow = document.getElementById('chat-window');
const chatInput = document.getElementById('chat-input');
const chatMessages = document.getElementById('chat-messages');
const iconOpen = document.getElementById('icon-open');
const iconClose = document.getElementById('icon-close');
let isChatOpen = false;

window.toggleChat = () => {
    isChatOpen = !isChatOpen;
    if (isChatOpen) {
        chatWindow.classList.remove('chat-hidden');
        chatWindow.classList.add('chat-visible');
        iconOpen.classList.add('hidden');
        iconClose.classList.remove('hidden');
        chatInput.focus();
    } else {
        chatWindow.classList.remove('chat-visible');
        chatWindow.classList.add('chat-hidden');
        iconOpen.classList.remove('hidden');
        iconClose.classList.add('hidden');
    }
};

window.handleEnter = (event) => {
    if (event.key === 'Enter') {
        sendMessage();
    }
};

function addMessage(content, isUser) {
    const messageContainer = document.createElement('div');
    messageContainer.className = `flex ${isUser ? 'justify-end' : 'justify-start'}`;

    const messageBubble = document.createElement('div');
    messageBubble.className = `rounded-lg p-3 text-sm max-w-[85%] border ${isUser ? 'bg-indigo-600 text-white rounded-br-none border-indigo-700' : 'bg-gray-800 text-gray-200 rounded-tl-none border-gray-700'}`;
    
    if (!isUser) {
        messageBubble.innerHTML = markdownToHtml(content);
    } else {
        messageBubble.textContent = content;
    }

    messageContainer.appendChild(messageBubble);
    chatMessages.appendChild(messageContainer);

    // Scroll to the bottom
    chatMessages.scrollTop = chatMessages.scrollHeight;
}

function showTypingIndicator() {
    const typingDiv = document.createElement('div');
    typingDiv.id = 'typing-indicator';
    typingDiv.className = 'flex justify-start';

    const bubble = document.createElement('div');
    bubble.className = 'bg-gray-800 text-gray-200 rounded-lg rounded-tl-none p-3 text-sm max-w-[85%] border border-gray-700 flex space-x-1 items-center';

    for (let i = 0; i < 3; i++) {
        const dot = document.createElement('div');
        dot.className = 'w-1.5 h-1.5 bg-gray-400 rounded-full typing-dot';
        bubble.appendChild(dot);
    }

    typingDiv.appendChild(bubble);
    chatMessages.appendChild(typingDiv);
    chatMessages.scrollTop = chatMessages.scrollHeight;
}

function hideTypingIndicator() {
    const indicator = document.getElementById('typing-indicator');
    if (indicator) {
        indicator.remove();
    }
}

window.sendMessage = async () => {
    const userMessage = chatInput.value.trim();
    if (userMessage === '') return;

    addMessage(userMessage, true);
    chatInput.value = '';
    chatInput.disabled = true;
    showTypingIndicator();

    try {
        // 1. Scrape the content for RAG
        const fixesContext = getFixesContext();

        // 2. Send request to the mock API endpoint
        const response = await fetch('api/chat.js', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({
                message: userMessage,
                context: fixesContext
            })
        });

        if (!response.ok) {
            throw new Error(`HTTP error! status: ${response.status}`);
        }

        const data = await response.json();
        hideTypingIndicator();
        addMessage(data.response, false);
    } catch (error) {
        console.error('Chat API Error:', error);
        hideTypingIndicator();
        addMessage('Sorry, I am having trouble connecting to the AI service. Please check your **`api/chat.js`** file!', false);
    } finally {
        chatInput.disabled = false;
        chatInput.focus();
    }
};

// Initialize the fix status on page load
document.addEventListener('DOMContentLoaded', initializeUI);

// The original "Hello" message is already in the HTML, so no need to send a welcome message here.
    </script>
</body>
</html>
